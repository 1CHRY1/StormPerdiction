import{i as P}from"./initMap--QzwS8UC.js";import{r,a as x,c as b,w as S,o as h,b as N,d as V,e as m,f as n,F}from"./index-BqiXETND.js";import{S as L,c as A,t as $,f as B}from"./controller-4oAeiCmh.js";import"./axios-CfQa2ZHH.js";const k=m("canvas",{id:"GPUFrame"},null,-1),H={__name:"HelloWorld copy",setup(M){const c=r(),l=r(0),u=r(0),o=r(0),s=r(0),t=r(0);let p=new Array(22);for(let e=0;e<22;e++)p[e]=`/ffvsrc/9711wind/uv_${16+e}.bin`;let f=new Array(22);for(let e=0;e<22;e++)e*6<132&&(f[e]=`/ffvsrc/9711flow/uv_${e*6}.bin`);let d=new Array(30);for(let e=0;e<30;e++)d[e]=`/ffvsrc/wind/uv_${e+10}.bin`;let v=new Array(30);for(let e=0;e<30;e++)v[e]=`/ffvsrc/flow/uv_${e+10}.bin`;let i=new Array(228);for(let e=0;e<228;e++)i[e]=`/bin/uv_${e}.bin`;let a=x(new L("flowlayer","/bin/station.bin",i,e=>e.match(/uv_(\d+)\.bin/)[1],"/ffvsrc/windBound.geojson"));a.framesPerPhase=30;const w=b(()=>t.value/100*a.uvUrlList.length);S(()=>{let e=a.currentResourcePointer/a.uvUrlList.length;t.value=Math.floor(e*100),l.value=a.particleNum.n,u.value=a.maxParticleNum,o.value=a.speedFactor.n,s.value=10}),h(async()=>{(await P(c.value,[120.55,32.08],6.5)).addLayer(a),console.log("map added layer")});const _=e=>{t.value=e,a.setProgress(t.value)},g=e=>{l.value=e,a.particleNum.n=e},y=e=>{o.value=e,a.speedFactor.n=e};return(e,R)=>(N(),V(F,null,[m("div",{id:"map",ref_key:"mapRef",ref:c},null,512),k,n(A,{"flow-progress":t.value,"max-particle-num":u.value,"now-particle-num":l.value,"now-speed":o.value,"max-speed":s.value,onParticleNumValue:g,onProgressValue:_,onSpeedValue:y},null,8,["flow-progress","max-particle-num","now-particle-num","now-speed","max-speed"]),n($,{type:"9711","time-step":w.value},null,8,["time-step"]),n(B,{"max-speed":s.value,desc:"风速(m/s)"},null,8,["max-speed"])],64))}};export{H as default};
