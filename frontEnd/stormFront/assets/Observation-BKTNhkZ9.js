import{g as A,a as z}from"./api-DruAj8pT.js";import{g as F,r as a,c as O,o as P,h as y,b as u,d as B,e as l,f as w,i as m,j as q,k as h,l as i,m as E,F as R,n as G,p as j,q as H,s as J,_ as K}from"./index-BqiXETND.js";const k=r=>(H("data-v-bafa2806"),r=r(),J(),r),Q={class:"flex h-full"},W={class:"flex flex-auto justify-center items-center bg-zinc-200"},X=["src"],Y={class:"flex flex-col w-[18rem] bg-white"},Z={class:"h-24 relative m-2 top-1 border border-zinc-300"},$=k(()=>l("div",{class:"h-8 leading-8 px-2 bg-[#1b6ec8] text-white"},"图片类型",-1)),ee={class:"flex-auto h-24 relative m-2 top-1 border border-zinc-300"},ae=k(()=>l("div",{class:"h-8 leading-8 px-2 bg-[#1b6ec8] text-white"},"图片列表",-1)),le={class:"flex flex-col h-24 relative m-2 top-1 border border-zinc-300"},te=k(()=>l("div",{class:"h-8 leading-8 px-2 bg-[#1b6ec8] text-white"},"图片动画",-1)),se={class:"flex flex-auto items-center"},oe={class:"m-3"},ne=F({__name:"Observation",setup(r){const d=a([]),C=a(new Map),t=a([]),b=a(),n=a(),s=a(),I=a(!0),v=a(!1),g=a(300),f=a(0),_=a(),T=O(()=>t.value.map(o=>({time:o})));P(async()=>{const{type:o,time:e,imageType:x}=await A("rainfall");b.value=x,d.value=[...o].map(p=>({value:p,label:p})),C.value=e,t.value=[...e.get(d.value[0].value)],n.value=d.value[0].value,s.value=t.value[0],_.value=await z(b.value,n.value,s.value),I.value=!1}),y([n],async()=>{t.value=[...C.value.get(n.value)],s.value=t.value[0]}),y([n,s],async()=>{_.value=_.value=await z(b.value,n.value,s.value)}),y(T,()=>{v.value=!1,clearInterval(f.value),s.value=t.value[0]});const D=o=>{o?s.value=o.time:s.value=t.value[0]},V=()=>{if(v.value)clearInterval(f.value),s.value=t.value[0];else{const o=t.value.length;let e=o-1;f.value=setInterval(()=>{s.value=t.value[e],e===0?e=o-1:e-=1},g.value)}v.value=!v.value};return(o,e)=>{const x=i("el-option"),p=i("el-select"),L=i("el-table-column"),M=i("el-table"),N=i("el-input-number"),S=i("el-button"),U=E("loading");return u(),B("div",Q,[l("div",W,[l("img",{class:"flex-auto m-4 max-h-[90vh] object-contain",src:_.value},null,8,X)]),l("div",Y,[l("div",Z,[$,w(p,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=c=>n.value=c),class:"m-2 w-[90%]",placeholder:"Select",size:"large",change:"selectChange"},{default:m(()=>[(u(!0),B(R,null,G(d.value,c=>(u(),h(x,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l("div",ee,[ae,q((u(),h(M,{data:T.value,stripe:"",class:"w-full h-[68vh]","highlight-current-row":!0,onCurrentChange:D},{default:m(()=>[w(L,{prop:"time",label:"时间"})]),_:1},8,["data"])),[[U,I.value]])]),l("div",le,[te,l("div",se,[w(N,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=c=>g.value=c),min:1,max:1e5,step:200,class:"m-3"},null,8,["modelValue"]),l("div",oe,[v.value?(u(),h(S,{key:1,type:"danger",class:"bg-[#1b6ec8]",onClick:V},{default:m(()=>[j("停止动画")]),_:1})):(u(),h(S,{key:0,type:"primary",class:"bg-[#1b6ec8]",onClick:V},{default:m(()=>[j("播放动画")]),_:1}))])])])])])}}}),ie=K(ne,[["__scopeId","data-v-bafa2806"]]);export{ie as default};
